<?php
    $weather = [
        "2021-12-20" => [
            [
                "hour" => 0,
                "description" => "light snow",
                "wind" => 6.2,
                "temp" => -2.06
            ],
            [
                "hour" => 1,
                "description" => "light clouds",
                "wind" => 6.6,
                "temp" => -1.76
            ],
            [
                "hour" => 2,
                "description" => "light clouds",
                "wind" => 7.2,
                "temp" => -2.09
            ],
            [
                "hour" => 3,
                "description" => "light clouds",
                "wind" => 7,
                "temp" => -2.48
            ],
            [
                "hour" => 4,
                "description" => "light thunderstorm",
                "wind" => 6,
                "temp" => -2.28
            ],
            [
                "hour" => 5,
                "description" => "light clouds",
                "wind" => 5.4,
                "temp" => -2.36
            ],
            [
                "hour" => 6,
                "description" => "light clouds",
                "wind" => 5.4,
                "temp" => -1.91
            ],
            [
                "hour" => 7,
                "description" => "light thunderstorm",
                "wind" => 5.6,
                "temp" => -1.59
            ],
            [
                "hour" => 8,
                "description" => "light thunderstorm",
                "wind" => 4.7,
                "temp" => -1.74
            ],
            [
                "hour" => 9,
                "description" => "moderate snow",
                "wind" => 4.1,
                "temp" => -1.29
            ],
            [
                "hour" => 10,
                "description" => "clear",
                "wind" => 4.8,
                "temp" => -1.05
            ],
            [
                "hour" => 11,
                "description" => "light snow",
                "wind" => 5.3,
                "temp" => -0.71
            ],
            [
                "hour" => 12,
                "description" => "moderate snow",
                "wind" => 6,
                "temp" => -1.18
            ],
            [
                "hour" => 13,
                "description" => "heavy snow",
                "wind" => 7,
                "temp" => -1.25
            ],
            [
                "hour" => 14,
                "description" => "heavy snow",
                "wind" => 7.2,
                "temp" => -0.78
            ],
            [
                "hour" => 15,
                "description" => "extreme clouds",
                "wind" => 6.7,
                "temp" => -1.09
            ],
            [
                "hour" => 16,
                "description" => "heavy rain",
                "wind" => 6.8,
                "temp" => -1.52
            ],
            [
                "hour" => 17,
                "description" => "clear",
                "wind" => 7.6,
                "temp" => -1.84
            ],
            [
                "hour" => 18,
                "description" => "light snow",
                "wind" => 8.2,
                "temp" => -1.39
            ],
            [
                "hour" => 19,
                "description" => "clear",
                "wind" => 8.9,
                "temp" => -1.01
            ],
            [
                "hour" => 20,
                "description" => "clear",
                "wind" => 9.5,
                "temp" => -0.61
            ],
            [
                "hour" => 21,
                "description" => "clear",
                "wind" => 10.4,
                "temp" => -1.07
            ],
            [
                "hour" => 22,
                "description" => "clear",
                "wind" => 10.4,
                "temp" => -0.89
            ],
            [
                "hour" => 23,
                "description" => "light rain",
                "wind" => 9.7,
                "temp" => -0.82
            ]
        ],
        "2021-12-21" => [
            [
                "hour" => 0,
                "description" => "light rain",
                "wind" => 10,
                "temp" => -0.72
            ],
            [
                "hour" => 1,
                "description" => "light snow",
                "wind" => 10.7,
                "temp" => -1.05
            ],
            [
                "hour" => 2,
                "description" => "light rain",
                "wind" => 10.7,
                "temp" => -0.61
            ],
            [
                "hour" => 3,
                "description" => "clear",
                "wind" => 11.1,
                "temp" => -0.35
            ],
            [
                "hour" => 4,
                "description" => "clear",
                "wind" => 11.9,
                "temp" => -0.64
            ],
            [
                "hour" => 5,
                "description" => "light snow",
                "wind" => 11,
                "temp" => -0.76
            ],
            [
                "hour" => 6,
                "description" => "moderate snow",
                "wind" => 10.4,
                "temp" => -0.71
            ],
            [
                "hour" => 7,
                "description" => "clear",
                "wind" => 9.6,
                "temp" => -1.04
            ],
            [
                "hour" => 8,
                "description" => "light snow",
                "wind" => 9.4,
                "temp" => -0.75
            ],
            [
                "hour" => 9,
                "description" => "moderate thunderstorm",
                "wind" => 8.4,
                "temp" => -1.24
            ],
            [
                "hour" => 10,
                "description" => "moderate thunderstorm",
                "wind" => 8.6,
                "temp" => -1.25
            ],
            [
                "hour" => 11,
                "description" => "heavy thunderstorm",
                "wind" => 8.2,
                "temp" => -1
            ],
            [
                "hour" => 12,
                "description" => "heavy clouds",
                "wind" => 9.2,
                "temp" => -0.85
            ],
            [
                "hour" => 13,
                "description" => "heavy rain",
                "wind" => 9,
                "temp" => -0.55
            ],
            [
                "hour" => 14,
                "description" => "heavy rain",
                "wind" => 8.7,
                "temp" => -0.28
            ],
            [
                "hour" => 15,
                "description" => "moderate rain",
                "wind" => 7.8,
                "temp" => -0.07
            ],
            [
                "hour" => 16,
                "description" => "clear",
                "wind" => 7.2,
                "temp" => -0.22
            ],
            [
                "hour" => 17,
                "description" => "clear",
                "wind" => 7.3,
                "temp" => -0.18
            ],
            [
                "hour" => 18,
                "description" => "light rain",
                "wind" => 7.3,
                "temp" => -0.26
            ],
            [
                "hour" => 19,
                "description" => "light clouds",
                "wind" => 8,
                "temp" => 0.18
            ],
            [
                "hour" => 20,
                "description" => "light thunderstorm",
                "wind" => 7.8,
                "temp" => 0.59
            ],
            [
                "hour" => 21,
                "description" => "moderate thunderstorm",
                "wind" => 8.2,
                "temp" => 0.88
            ],
            [
                "hour" => 22,
                "description" => "light clouds",
                "wind" => 8.5,
                "temp" => 0.47
            ],
            [
                "hour" => 23,
                "description" => "moderate clouds",
                "wind" => 9.3,
                "temp" => 0.73
            ]
        ],
        "2021-12-22" => [
            [
                "hour" => 0,
                "description" => "moderate thunderstorm",
                "wind" => 8.7,
                "temp" => 1.19
            ],
            [
                "hour" => 1,
                "description" => "light clouds",
                "wind" => 9.3,
                "temp" => 0.81
            ],
            [
                "hour" => 2,
                "description" => "light snow",
                "wind" => 9.2,
                "temp" => 0.89
            ],
            [
                "hour" => 3,
                "description" => "moderate snow",
                "wind" => 8.8,
                "temp" => 1.06
            ],
            [
                "hour" => 4,
                "description" => "heavy rain",
                "wind" => 9,
                "temp" => 0.75
            ],
            [
                "hour" => 5,
                "description" => "moderate snow",
                "wind" => 9.3,
                "temp" => 0.56
            ],
            [
                "hour" => 6,
                "description" => "heavy snow",
                "wind" => 9.6,
                "temp" => 0.63
            ],
            [
                "hour" => 7,
                "description" => "extreme snow",
                "wind" => 9.5,
                "temp" => 0.35
            ],
            [
                "hour" => 8,
                "description" => "extreme snow",
                "wind" => 9.1,
                "temp" => 0.62
            ],
            [
                "hour" => 9,
                "description" => "extreme rain",
                "wind" => 8.8,
                "temp" => 1.24
            ],
            [
                "hour" => 10,
                "description" => "extreme snow",
                "wind" => 9.6,
                "temp" => 1.31
            ],
            [
                "hour" => 11,
                "description" => "extreme thunderstorm",
                "wind" => 9.6,
                "temp" => 0.81
            ],
            [
                "hour" => 12,
                "description" => "extreme snow",
                "wind" => 10.5,
                "temp" => 0.35
            ],
            [
                "hour" => 13,
                "description" => "extreme rain",
                "wind" => 10.9,
                "temp" => -0.07
            ],
            [
                "hour" => 14,
                "description" => "clear",
                "wind" => 11.8,
                "temp" => -0.54
            ],
            [
                "hour" => 15,
                "description" => "light rain",
                "wind" => 12.2,
                "temp" => -0.69
            ],
            [
                "hour" => 16,
                "description" => "clear",
                "wind" => 11.3,
                "temp" => -0.23
            ],
            [
                "hour" => 17,
                "description" => "light rain",
                "wind" => 11.3,
                "temp" => -0.72
            ],
            [
                "hour" => 18,
                "description" => "clear",
                "wind" => 11.7,
                "temp" => -0.67
            ],
            [
                "hour" => 19,
                "description" => "clear",
                "wind" => 12.5,
                "temp" => -0.95
            ],
            [
                "hour" => 20,
                "description" => "light rain",
                "wind" => 12.3,
                "temp" => -1.14
            ],
            [
                "hour" => 21,
                "description" => "moderate rain",
                "wind" => 12.2,
                "temp" => -0.87
            ],
            [
                "hour" => 22,
                "description" => "heavy rain",
                "wind" => 11.6,
                "temp" => -0.75
            ],
            [
                "hour" => 23,
                "description" => "clear",
                "wind" => 12.2,
                "temp" => -0.71
            ]
        ],
        "2021-12-23" => [
            [
                "hour" => 0,
                "description" => "clear",
                "wind" => 11.6,
                "temp" => -1
            ],
            [
                "hour" => 1,
                "description" => "light snow",
                "wind" => 12.2,
                "temp" => -0.87
            ],
            [
                "hour" => 2,
                "description" => "light snow",
                "wind" => 11.6,
                "temp" => -1.14
            ],
            [
                "hour" => 3,
                "description" => "light snow",
                "wind" => 11,
                "temp" => -1.53
            ],
            [
                "hour" => 4,
                "description" => "moderate rain",
                "wind" => 12,
                "temp" => -1.96
            ],
            [
                "hour" => 5,
                "description" => "clear",
                "wind" => 11.7,
                "temp" => -2.3
            ],
            [
                "hour" => 6,
                "description" => "clear",
                "wind" => 12,
                "temp" => -2.42
            ],
            [
                "hour" => 7,
                "description" => "light rain",
                "wind" => 11.8,
                "temp" => -2.33
            ],
            [
                "hour" => 8,
                "description" => "clear",
                "wind" => 12.1,
                "temp" => -2.12
            ],
            [
                "hour" => 9,
                "description" => "clear",
                "wind" => 12.4,
                "temp" => -1.67
            ],
            [
                "hour" => 10,
                "description" => "light snow",
                "wind" => 12,
                "temp" => -1.6
            ],
            [
                "hour" => 11,
                "description" => "light snow",
                "wind" => 11.2,
                "temp" => -1.11
            ],
            [
                "hour" => 12,
                "description" => "light clouds",
                "wind" => 11.7,
                "temp" => -1.56
            ],
            [
                "hour" => 13,
                "description" => "moderate rain",
                "wind" => 11.9,
                "temp" => -1.69
            ],
            [
                "hour" => 14,
                "description" => "moderate snow",
                "wind" => 11.5,
                "temp" => -1.32
            ],
            [
                "hour" => 15,
                "description" => "light snow",
                "wind" => 12.2,
                "temp" => -1.38
            ],
            [
                "hour" => 16,
                "description" => "clear",
                "wind" => 11.9,
                "temp" => -1.58
            ],
            [
                "hour" => 17,
                "description" => "clear",
                "wind" => 11.4,
                "temp" => -1.53
            ],
            [
                "hour" => 18,
                "description" => "clear",
                "wind" => 12,
                "temp" => -1.85
            ],
            [
                "hour" => 19,
                "description" => "clear",
                "wind" => 12,
                "temp" => -1.99
            ],
            [
                "hour" => 20,
                "description" => "clear",
                "wind" => 12.9,
                "temp" => -2.45
            ],
            [
                "hour" => 21,
                "description" => "clear",
                "wind" => 12.9,
                "temp" => -1.98
            ],
            [
                "hour" => 22,
                "description" => "light snow",
                "wind" => 13.3,
                "temp" => -2.18
            ],
            [
                "hour" => 23,
                "description" => "clear",
                "wind" => 13.3,
                "temp" => -1.89
            ]
        ],
        "2021-12-24" => [
            [
                "hour" => 0,
                "description" => "clear",
                "wind" => 13.4,
                "temp" => -2.09
            ],
            [
                "hour" => 1,
                "description" => "light rain",
                "wind" => 12.4,
                "temp" => -1.79
            ],
            [
                "hour" => 2,
                "description" => "clear",
                "wind" => 12.7,
                "temp" => -1.55
            ],
            [
                "hour" => 3,
                "description" => "light rain",
                "wind" => 12.9,
                "temp" => -1.59
            ],
            [
                "hour" => 4,
                "description" => "moderate clouds",
                "wind" => 12.4,
                "temp" => -1.74
            ],
            [
                "hour" => 5,
                "description" => "moderate snow",
                "wind" => 12.2,
                "temp" => -1.64
            ],
            [
                "hour" => 6,
                "description" => "clear",
                "wind" => 12.3,
                "temp" => -1.58
            ],
            [
                "hour" => 7,
                "description" => "clear",
                "wind" => 11.4,
                "temp" => -1.67
            ],
            [
                "hour" => 8,
                "description" => "light snow",
                "wind" => 11.4,
                "temp" => -1.62
            ],
            [
                "hour" => 9,
                "description" => "light snow",
                "wind" => 11.1,
                "temp" => -1.15
            ],
            [
                "hour" => 10,
                "description" => "light rain",
                "wind" => 11.5,
                "temp" => -0.97
            ],
            [
                "hour" => 11,
                "description" => "moderate clouds",
                "wind" => 12,
                "temp" => -1.07
            ],
            [
                "hour" => 12,
                "description" => "heavy snow",
                "wind" => 11.8,
                "temp" => -1.28
            ],
            [
                "hour" => 13,
                "description" => "extreme rain",
                "wind" => 11.1,
                "temp" => -0.84
            ],
            [
                "hour" => 14,
                "description" => "clear",
                "wind" => 11.6,
                "temp" => -0.71
            ],
            [
                "hour" => 15,
                "description" => "clear",
                "wind" => 11.1,
                "temp" => -0.63
            ],
            [
                "hour" => 16,
                "description" => "clear",
                "wind" => 11.8,
                "temp" => -0.84
            ],
            [
                "hour" => 17,
                "description" => "clear",
                "wind" => 12.5,
                "temp" => -0.4
            ],
            [
                "hour" => 18,
                "description" => "clear",
                "wind" => 13.1,
                "temp" => -0.87
            ],
            [
                "hour" => 19,
                "description" => "clear",
                "wind" => 13.2,
                "temp" => -1.33
            ],
            [
                "hour" => 20,
                "description" => "clear",
                "wind" => 13.9,
                "temp" => -1.82
            ],
            [
                "hour" => 21,
                "description" => "clear",
                "wind" => 13.4,
                "temp" => -2.3
            ],
            [
                "hour" => 22,
                "description" => "clear",
                "wind" => 13.1,
                "temp" => -1.84
            ],
            [
                "hour" => 23,
                "description" => "light snow",
                "wind" => 14.1,
                "temp" => -2.01
            ]
        ],
        "2021-12-25" => [
            [
                "hour" => 0,
                "description" => "moderate clouds",
                "wind" => 14.2,
                "temp" => -1.9
            ],
            [
                "hour" => 1,
                "description" => "light clouds",
                "wind" => 14.1,
                "temp" => -2.02
            ],
            [
                "hour" => 2,
                "description" => "light snow",
                "wind" => 13.2,
                "temp" => -2.43
            ],
            [
                "hour" => 3,
                "description" => "heavy snow",
                "wind" => 13.9,
                "temp" => -2.68
            ],
            [
                "hour" => 4,
                "description" => "heavy snow",
                "wind" => 14.1,
                "temp" => -2.23
            ],
            [
                "hour" => 5,
                "description" => "moderate snow",
                "wind" => 14,
                "temp" => -2.2
            ],
            [
                "hour" => 6,
                "description" => "light snow",
                "wind" => 13.2,
                "temp" => -2.48
            ],
            [
                "hour" => 7,
                "description" => "clear",
                "wind" => 13.8,
                "temp" => -2.18
            ],
            [
                "hour" => 8,
                "description" => "light snow",
                "wind" => 14.2,
                "temp" => -1.85
            ],
            [
                "hour" => 9,
                "description" => "light snow",
                "wind" => 15.2,
                "temp" => -1.83
            ],
            [
                "hour" => 10,
                "description" => "light clouds",
                "wind" => 15.3,
                "temp" => -1.67
            ],
            [
                "hour" => 11,
                "description" => "light rain",
                "wind" => 14.5,
                "temp" => -1.46
            ],
            [
                "hour" => 12,
                "description" => "clear",
                "wind" => 14.1,
                "temp" => -1.24
            ],
            [
                "hour" => 13,
                "description" => "clear",
                "wind" => 13.5,
                "temp" => -1.38
            ],
            [
                "hour" => 14,
                "description" => "clear",
                "wind" => 12.6,
                "temp" => -1.45
            ],
            [
                "hour" => 15,
                "description" => "clear",
                "wind" => 11.9,
                "temp" => -1.43
            ],
            [
                "hour" => 16,
                "description" => "light snow",
                "wind" => 11,
                "temp" => -1.32
            ],
            [
                "hour" => 17,
                "description" => "light snow",
                "wind" => 12,
                "temp" => -1.19
            ],
            [
                "hour" => 18,
                "description" => "light snow",
                "wind" => 11.2,
                "temp" => -1.62
            ],
            [
                "hour" => 19,
                "description" => "light clouds",
                "wind" => 10.7,
                "temp" => -1.85
            ],
            [
                "hour" => 20,
                "description" => "moderate thunderstorm",
                "wind" => 11.3,
                "temp" => -1.85
            ],
            [
                "hour" => 21,
                "description" => "heavy clouds",
                "wind" => 12.3,
                "temp" => -1.45
            ],
            [
                "hour" => 22,
                "description" => "heavy thunderstorm",
                "wind" => 12,
                "temp" => -1.13
            ],
            [
                "hour" => 23,
                "description" => "heavy thunderstorm",
                "wind" => 11.9,
                "temp" => -1.03
            ]
        ],
        "2021-12-26" => [
            [
                "hour" => 0,
                "description" => "heavy thunderstorm",
                "wind" => 12.7,
                "temp" => -1.08
            ],
            [
                "hour" => 1,
                "description" => "moderate thunderstorm",
                "wind" => 13.4,
                "temp" => -0.69
            ],
            [
                "hour" => 2,
                "description" => "moderate snow",
                "wind" => 13.4,
                "temp" => -0.94
            ],
            [
                "hour" => 3,
                "description" => "heavy rain",
                "wind" => 12.4,
                "temp" => -1.2
            ],
            [
                "hour" => 4,
                "description" => "clear",
                "wind" => 12.6,
                "temp" => -1.27
            ],
            [
                "hour" => 5,
                "description" => "clear",
                "wind" => 11.7,
                "temp" => -1.5
            ],
            [
                "hour" => 6,
                "description" => "light rain",
                "wind" => 11.6,
                "temp" => -1.81
            ],
            [
                "hour" => 7,
                "description" => "light snow",
                "wind" => 11.5,
                "temp" => -2.19
            ],
            [
                "hour" => 8,
                "description" => "moderate snow",
                "wind" => 12.3,
                "temp" => -2.16
            ],
            [
                "hour" => 9,
                "description" => "moderate clouds",
                "wind" => 11.6,
                "temp" => -1.79
            ],
            [
                "hour" => 10,
                "description" => "moderate thunderstorm",
                "wind" => 11.8,
                "temp" => -2.24
            ],
            [
                "hour" => 11,
                "description" => "light snow",
                "wind" => 12.7,
                "temp" => -2.2
            ],
            [
                "hour" => 12,
                "description" => "light snow",
                "wind" => 13.6,
                "temp" => -1.88
            ],
            [
                "hour" => 13,
                "description" => "moderate clouds",
                "wind" => 13.2,
                "temp" => -1.77
            ],
            [
                "hour" => 14,
                "description" => "light clouds",
                "wind" => 13.7,
                "temp" => -2.25
            ],
            [
                "hour" => 15,
                "description" => "light clouds",
                "wind" => 13.9,
                "temp" => -2.63
            ],
            [
                "hour" => 16,
                "description" => "moderate clouds",
                "wind" => 14.7,
                "temp" => -2.77
            ],
            [
                "hour" => 17,
                "description" => "moderate clouds",
                "wind" => 14.6,
                "temp" => -2.73
            ],
            [
                "hour" => 18,
                "description" => "moderate clouds",
                "wind" => 14.8,
                "temp" => -2.96
            ],
            [
                "hour" => 19,
                "description" => "light snow",
                "wind" => 15.3,
                "temp" => -3.09
            ],
            [
                "hour" => 20,
                "description" => "light clouds",
                "wind" => 15.9,
                "temp" => -3.24
            ],
            [
                "hour" => 21,
                "description" => "light snow",
                "wind" => 15.4,
                "temp" => -3.01
            ],
            [
                "hour" => 22,
                "description" => "light snow",
                "wind" => 15.8,
                "temp" => -3.1
            ],
            [
                "hour" => 23,
                "description" => "clear",
                "wind" => 16.2,
                "temp" => -3.56
            ]
        ]
    ];
    // solution starts here
    $date_array = array_keys($weather);
    
    
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>White Christmas</title>
</head>
<body>
    <h1>White Christmas</h1>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Min</th>
                <th>Max</th>
                <th>Avg</th>
                <th>Forecast</th>
                <th>Snowy</th>
            </tr>
            
            
        </thead>
        <tbody>

            <?php foreach($date_array as $date):?>
                <?php $temp_array = array();?>
                <?php $desc_array = array();?>
                <?php $snowCount = 0;?>
                
               <?php foreach($weather[$date] as $dailydata):?>
                <?php array_push($temp_array,$dailydata["temp"]);?>
                <?php $desc_string = $dailydata["description"];?>
                <?php $desc_list = explode(" ", $desc_string);?>
                <?php $desc = $desc_list[count($desc_list)-1];?>
                <?php if($desc == "snow"){
                    $snowCount = $snowCount + 1;
                };
                ?>
                <?php array_push($desc_array,$desc);?>
                
               <?php endforeach ; ?>
               <?php 
               $minTemp = min($temp_array);
               $maxTemp = max($temp_array);
               $avgTemp = array_sum($temp_array)/count($temp_array);
               ?>
               <?php if($snowCount >=8 &&$avgTemp <0.0):?>
                <tr class="white">
                <?php endif ;?>
                <?php if($snowCount <8 ||$avgTemp >=0.0):?>
                <tr >
                <?php endif ;?>
                <?php if($date == "2021-12-25" &&$snowCount >=8 &&$avgTemp <0.0):?>
                    <script type="text/javascript" src="snow.js"></script>
                <?php endif ;?>
               <td><?= $date ?></td>
               <td><?= min($temp_array)?></td>
               <td><?= max($temp_array)?></td>
               <td><?= array_sum($temp_array)/count($temp_array)?></td>
               <?php $values = array_count_values($desc_array);
                     arsort($values);
                     $keys=array_keys($values);;?>
               <td><?= $keys[0]?></td>
               <td><?= $snowCount?></td>
               <?php ?>
               
               </tr>

            <?php endforeach ;?>
        </tbody>
    </table>
    
    <!-- <script src="snow.js"></script> -->
</body>
</html>
